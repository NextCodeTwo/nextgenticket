<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../assets/css/main.css" />
    <title>Register | Next Code Two</title>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" defer></script>
    <!-- Favicons -->
    <link rel="icon" href="https://www.nextcodetwo.be/assets/favicon/favicon.png" type="image/png" sizes="16x16" />
</head>
<body class="bg-gray-50 dark:bg-gray-900">

    <div id="missing-message" class="hidden bg-orange-500 text-white py-2 text-center fixed top-0 left-0 right-0 z-50">
        Please fill in all fields.
    </div>
    <!-- Register Form Section -->
    <section>
        <div class="flex min-h-screen flex-col justify-center items-center px-6 py-12 lg:px-8 text-white">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg sm:mx-auto sm:w-full sm:max-w-md">
                <!-- Logo and Title -->
                <div>
                  <img class="mx-auto h-10 w-auto" src="https://www.nextcodetwo.be/assets/img/logo/transparant/transparant-nct.png" alt="NCT Logo">
                  <h2 class="mt-6 text-center text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Create a new account</h2>
                  <p class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400">
                      Please enter your details to create an account.
                  </p>
                </div>
                <!-- Form -->
                <div class="mt-8">
                  <form class="space-y-6" action="/register-process" method="POST"> <!-- Ensure action points to your backend register handler -->
                    <!-- Username Input -->
                    <div>
                      <label for="username" class="block text-sm font-medium text-gray-900 dark:text-white">Username</label>
                      <div class="mt-2">
                        <input type="text" id="username" name="username" placeholder="Enter your username" class="w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                      </div>
                    </div>
                    <!-- Email Input -->
                    <div>
                      <label for="email" class="block text-sm font-medium text-gray-900 dark:text-white">Email address</label>
                      <div class="mt-2">
                        <input type="email" id="email" name="email" placeholder="you@domain.com" class="w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                      </div>
                    </div>
                    <!-- Password Input -->
                    <div>
                      <label for="password" class="block text-sm font-medium text-gray-900 dark:text-white">Password</label>
                      <div class="mt-2">
                        <input type="password" id="password" name="password" placeholder="********" class="w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                      </div>
                    </div>
                    <!-- Turnstile CAPTCHA -->
                    <div class="flex justify-center items-center mt-4">
                        <div class="cf-turnstile rounded-lg p-4" data-sitekey="0x4AAAAAABSOPrwh8XH2C0UV" data-theme="dark"></div>
                    </div>
                    <!-- Submit Button -->
                    <div>
                      <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-xl mt-4 hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-600">Register</button>
                    </div>
                  </form>
                  <!-- Link to Login -->
                  <p class="mt-8 text-center text-sm text-gray-500 dark:text-gray-400">
                    Already a member? 
                    <a href="/login.html" class="font-semibold text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300">Login here</a>
                  </p>
                </div>
            </div>
        </div>
    </section>
<script>
     window.onload = function() {
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const messageDuration = 5000; // 5 seconds

        // Helper function to show a message element
        const showMessage = (elementId) => {
            const messageElement = document.getElementById(elementId);
            if (messageElement) {
                messageElement.classList.remove('hidden');
                setTimeout(() => messageElement.classList.add('hidden'), messageDuration);
                // Clean the URL - remove query parameters after showing message
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }

        // Check for specific messages based on URL parameters
        if (urlParams.get('registered') === 'true') {
            showMessage('registered-message');
        }
        if (urlParams.get('reset') === 'true') {
            showMessage('reset-message');
        }
        if (urlParams.get('error') === 'notloggedin') {
            showMessage('notloggedin-message');
        }
        if (urlParams.get('error') === 'incorrect-email') {
            showMessage('incorrect-email-message');
        }
        if (urlParams.get('error') === 'incorrect-password') {
            showMessage('incorrect-password-message');
        }
        if (urlParams.get('error') === 'missing') {
            showMessage('missing-message');
        }
        if (urlParams.get('error') === 'server') {
            showMessage('server-message');
        }
    }
</script>
</body>
</html>
